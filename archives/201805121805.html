<!DOCTYPE html>
<html lang="en">
<head>
  <title>MySpider | 我有一瓶酒，只想跟你喝</title>
  <meta charset="utf-8">
<meta name="description" content="MySpider just for test ,to be continue!! #!/usr/bin/python # -*- coding: utf-8 -*- # encoding=utf-8 from urllib import request import os from bs4 import BeautifulSoup import ssl def getAllLink(): ssl._create_default_https_context = ssl._create_unverified_context weburl = 'https://movie.douban.com/chart' webheader = { 'Connection': 'keep-alive', 'Accept': 'text/html, application/xhtml+xml, application/xml;q …"><meta name="author" content="Torikku">  <meta name="viewport" content="initial-scale=1, maximum-scale=1" />
  <meta http-equiv="Cache-Control" content="max-age=604800, must-revalidate" />
  <link href="https://torikku.github.io/theme/css/screen.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="https://torikku.github.io/favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="https://torikku.github.io/favicon.ico" type="image/x-icon">
  <link href="https://torikku.github.io/" type="application/atom+xml" rel="alternate" title="我有一瓶酒，只想跟你喝 ATOM Feed" />
</head>
<body>
<div id="outer-wrapper">
<div id="header-wrapper">
  <div class="logo"><a href="https://torikku.github.io">我有一瓶酒，只想跟你喝</a></div>
  <div class="small">Torikku's life</div>
    <div class="nav">
  <li><a href="https://torikku.github.io/archives/">那一天</a></li>
  <li><a href="https://torikku.github.io/about/">关于（建设中）</a></li>
    </div>
</div>    <div id="main">
<h2><a href="category/{slug}.html/archives/201805121805.html">MySpider</a></h2>
<h5><i class="icon-feather"></i> 2018年05月12日(星期六)
<i class="icon-bookmarks"></i>
</h5>

<h1>MySpider</h1>
<blockquote>
<p>just for test ,to be continue!!</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># encoding=utf-8</span>

<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">request</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="k">def</span> <span class="nf">getAllLink</span><span class="p">():</span>

    <span class="n">ssl</span><span class="o">.</span><span class="n">_create_default_https_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">_create_unverified_context</span>

    <span class="n">weburl</span> <span class="o">=</span> <span class="s1">&#39;https://movie.douban.com/chart&#39;</span>
    <span class="n">webheader</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Connection&#39;</span><span class="p">:</span> <span class="s1">&#39;keep-alive&#39;</span><span class="p">,</span>
        <span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/html, application/xhtml+xml, application/xml;q = 0.9, image/webp, image/apng, */*;q = 0.8&#39;</span><span class="p">,</span>
        <span class="c1">#&#39;Accept-Encoding&#39;: &#39;gzip, deflate, br&#39;,</span>
        <span class="s1">&#39;Accept-Language&#39;</span><span class="p">:</span> <span class="s1">&#39;zh-CN, zh;q = 0.8&#39;</span><span class="p">,</span>
        <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span><span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36&#39;</span>
    <span class="p">}</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">weburl</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="n">webheader</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="c1">#html = html.decode(&#39;UTF-8&#39;)</span>
    <span class="c1">#print(html)</span>

    <span class="k">return</span> <span class="n">html</span>

<span class="k">def</span> <span class="nf">saveFile</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">savePath</span> <span class="o">=</span> <span class="s1">&#39;/Users/sean.zhao/PycharmProjects/MyPicture/Debug.txt&#39;</span>
    <span class="n">f_obj</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">savePath</span><span class="p">,</span><span class="s1">&#39;wb&#39;</span><span class="p">)</span>
    <span class="n">f_obj</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">f_obj</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;finish SAVE&#39;</span><span class="p">)</span>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">getAllLink</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">))</span>
    <span class="n">saveFile</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

<p align="center"><a href="#">on the top</a></p>
    </div>
</div>
<div id="footer-wrapper">
<ul class="footer">
</ul><ul class="footer">
    <li class="footer">&copy;&nbsp;2014&nbsp;::</li>
    <li class="footer"><a href="https://torikku.github.io">我有一瓶酒，只想跟你喝 </a>&nbsp;::</li>
    <li class="footer">powered by <a href="https://github.com/getpelican">pelican</a>&nbsp;::</li>
    <li class="footer"><a href="http://creativecommons.org/licenses/by-nc/3.0/deed.ru">CC BY-NC</a></li>
</ul>
</div></body>
</html>